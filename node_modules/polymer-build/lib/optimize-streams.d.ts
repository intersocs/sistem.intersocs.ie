/// <reference types="vinyl" />
/// <reference types="node" />
import { Options as HTMLMinifierOptions } from 'html-minifier';
import { ModuleResolutionStrategy } from 'polymer-project-config';
import { Transform } from 'stream';
import File = require('vinyl');
export declare type FileCB = (error?: any, file?: File) => void;
export declare type CSSOptimizeOptions = {
    stripWhitespace?: boolean;
};
export interface OptimizeOptions {
    html?: {
        minify?: boolean | {
            exclude?: string[];
        };
    };
    css?: {
        minify?: boolean | {
            exclude?: string[];
        };
    };
    js?: JsOptimizeOptions;
}
export interface JsOptimizeOptions {
    minify?: boolean | {
        exclude?: string[];
    };
    compile?: boolean | {
        exclude?: string[];
    };
    moduleResolution?: ModuleResolutionStrategy;
    transformEsModulesToAmd?: boolean;
}
/**
 * GenericOptimizeTransform is a generic optimization stream. It can be extended
 * to create a new kind of specific file-type optimizer, or it can be used
 * directly to create an ad-hoc optimization stream for different libraries.
 * If the transform library throws an exception when run, the file will pass
 * through unaffected.
 */
export declare class GenericOptimizeTransform extends Transform {
    optimizer: (content: string, file: File) => string;
    optimizerName: string;
    constructor(optimizerName: string, optimizer: (content: string, file: File) => string);
    _transform(file: File, _encoding: string, callback: FileCB): void;
}
/**
 * Transform JavaScript using Babel.
 */
export declare class JsTransform extends GenericOptimizeTransform {
    constructor(options: JsOptimizeOptions);
}
/**
 * CSSMinifyTransform minifies CSS that pass through it (via css-slam).
 */
export declare class CSSMinifyTransform extends GenericOptimizeTransform {
    private options;
    constructor(options: CSSOptimizeOptions);
    _transform(file: File, encoding: string, callback: FileCB): void;
}
/**
 * InlineCSSOptimizeTransform minifies inlined CSS (found in HTML files) that
 * passes through it (via css-slam).
 */
export declare class InlineCSSOptimizeTransform extends GenericOptimizeTransform {
    private options;
    constructor(options: CSSOptimizeOptions);
    _transform(file: File, encoding: string, callback: FileCB): void;
}
/**
 * HTMLOptimizeTransform minifies HTML files that pass through it
 * (via html-minifier).
 */
export declare class HTMLOptimizeTransform extends GenericOptimizeTransform {
    constructor(options: HTMLMinifierOptions);
}
/**
 * Returns an array of optimization streams to use in your build, based on the
 * OptimizeOptions given.
 */
export declare function getOptimizeStreams(options?: OptimizeOptions): NodeJS.ReadWriteStream[];
